<%- include('./partials/header') %>

<div class="min-h-screen bg-gray-100 py-10 px-4 sm:px-6">
  <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-6 sm:p-8">
    
    <!-- Back Button -->
    <a href="/owners/admin" class="text-blue-500 text-sm mb-4 inline-block hover:underline">
      ← Back to Dashboard
    </a>

    <!-- Page Title -->
    <h2 class="text-2xl sm:text-3xl font-bold text-blue-600 mb-6 flex items-center gap-2">
      <i class="ri-bar-chart-box-line"></i> User Analytics
    </h2>

    <!-- Total Users -->
    <div class="mb-4 text-gray-800 text-base sm:text-lg">
      <p><strong>Total Users:</strong> <span class="text-blue-600 font-semibold"><%= totalUsers %></span></p>
    </div>

    <!-- Empty Cart Users -->
    <div class="mb-4 text-gray-800 text-base sm:text-lg">
      <p><strong>Users with Empty Cart:</strong> <span class="text-red-500 font-semibold"><%= emptyCarts.length %></span></p>
    </div>

    <!-- Most Active Users -->
    <div class="mb-6">
      <h3 class="text-lg sm:text-xl font-semibold text-gray-800 mb-2">🔥 Most Active Users (by Cart)</h3>
      <ul class="space-y-2">
        <% mostActive.forEach(user => { %>
          <li class="flex justify-between flex-wrap gap-2 bg-green-50 px-4 py-2 rounded shadow-sm hover:bg-green-100 transition">
            <span class="font-medium text-sm sm:text-base"><%= user.fullname %></span>
            <span class="text-sm sm:text-base"><%= user.cart.length %> item<%= user.cart.length !== 1 ? 's' : '' %></span>
          </li>
        <% }) %>
      </ul>
    </div>

    <!-- Recent Signups -->
    <div>
      <h3 class="text-lg sm:text-xl font-semibold text-gray-800 mb-2">🕒 Recent Signups</h3>
      <ul class="space-y-2">
        <% recentUsers.forEach(user => { %>
          <li class="flex justify-between flex-wrap gap-2 bg-blue-50 px-4 py-2 rounded shadow-sm hover:bg-blue-100 transition">
            <span class="font-medium text-sm sm:text-base"><%= user.fullname %></span>
            <span class="text-sm sm:text-base">
              Joined on 
              <% if (user.createdAt) { %>
                <%= new Date(user.createdAt).toDateString() %>
              <% } else { %>
                Unknown Date
              <% } %>
            </span>
          </li>
        <% }) %>
      </ul>
    </div>

  </div>
</div>

<%- include('./partials/footer') %>